<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>New Ticket</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
</head>

<body>
    <div class="menu">
        <div class="nav-menu">
            <div class="option"><a href="/tickets">Tickets</a></div>
            <div class="divider option-selected">/</div>
            <div class="option option-selected">New</div>
            <div class="divider">|</div><div class="option"><a href="/admin">Admin</a></div>
        </div>
        <div id="login-menu" class="login-menu"></div>
    </div>

    <div class="content">
        <table id="ticket-info">
            <tr>
                <th><label for="customer">Customer</label></th>
                <td>
                    <input type="text" id="customer">
                </td>
            </tr>
            <tr>
                <th><label for="description">Description</label></th>
                <td>
                    <textarea id="description" rows="10" cols="50"></textarea>
                </td>
            </tr>

        </table>
        <button id="ticket-create-button" class="ticket-create-button" onclick="createTicket()">Create</button>
    </div>

    <script>
        async function createTicket() {
            const customer = document.getElementById('customer').value
            const description = document.getElementById('description').value
            const ticket = { customer, description }

            const body = await fetch('/api/tickets', {
                method: 'POST',
                headers: {'content-type': 'application/json'},
                body: JSON.stringify(ticket)}).then(x => x.json())
            window.location.href = `/ticket/${body.id}`
        }
    </script>
</body>
<script src="/scripts/login.js"></script>

</html>